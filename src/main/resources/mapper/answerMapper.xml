<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.answerMapper">
	<!-- 칼럼 리스트 -->
	<sql id="answerColumns">
 		ans_num,
 		po_num,
 		ans_contents,
 		ans_datetime,
 		ans_updatetime,
 		ans_writer,
 		ans_hots,
 		ans_deleteYn
	</sql>

	<!-- 답글 작성 -->
	<insert id="insert" parameterType="com.hustar.value_coding_boot.vo.AnswerVO">
		<![CDATA[
			INSERT INTO t_answer (
			ans_num,
	 		po_num,
	 		ans_contents,
	 		ans_datetime,
	 		ans_updatetime,
	 		ans_writer,
	 		ans_hots,
	 		ans_deleteYn
	 		) VALUES (
	 			NULL,
	 			#{po_num},
				#{ans_contents},
				NOW(),
				NULL,
				#{ans_writer},
				0,
				IFNULL(#{ans_deleteYn}, 'N')
			)
		]]>
	</insert>
	<!-- //답글 작성 -->
	
	<!-- 답글 보여주기 -->
	<select id="selectAnswers" parameterType="com.hustar.value_coding_boot.vo.AnswerVO" resultType="com.hustar.value_coding_boot.vo.AnswerVO">
		<![CDATA[
			SELECT * FROM t_answer
				WHERE po_num = #{po_num}
				AND ans_deleteYn = 'N'
				ORDER BY ans_num ASC
		]]>
	</select>
	<!-- //답글 보여주기 -->
	
	<!-- 답글 한개 선택 -->
	<select id="selectDetail" parameterType="com.hustar.value_coding_boot.vo.AnswerVO" resultType="com.hustar.value_coding_boot.vo.AnswerVO">
		<![CDATA[
			SELECT * FROM t_answer
				WHERE po_num = #{po_num}
				AND ans_num = #{ans_num}
				AND ans_deleteYn = 'N'
		]]>
	</select>
	<!-- //답글 한개 선택 -->
	
	<!-- 답글 수정 -->
	<update id="updateAnswer" parameterType="com.hustar.value_coding_boot.vo.AnswerVO">
		<![CDATA[
			UPDATE t_answer SET 
				ans_contents = #{ans_contents}, 
				ans_updatetime = NOW() 
				WHERE ans_num = #{ans_num};
		]]>
	</update>
	<!-- //답글 수정 -->
	
	<!-- 답글 삭제 -->
	<update id="deleteAnswer" parameterType="com.hustar.value_coding_boot.vo.AnswerVO">
		<![CDATA[
			UPDATE t_answer SET 
				ans_deleteYn = 'Y'
				WHERE ans_num = #{ans_num};
		]]>
	</update>
	<!-- //답글 삭제 -->
	
	<!-- 답글 갯수 -->
	<select id="selectAnswersCnt" parameterType="com.hustar.value_coding_boot.vo.AnswerVO" resultType="int">
		<![CDATA[
			SELECT COUNT(*) FROM t_answer
				WHERE po_num = #{po_num}
				AND ans_deleteYn = 'N'
				ORDER BY ans_num ASC
		]]>
	</select>
	<!-- //답글 갯수 -->
</mapper>